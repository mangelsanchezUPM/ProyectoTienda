@using ProyectoTienda
@using ProyectoTienda.Models
@model IEnumerable<Product>

@{
    ViewBag.Title = "Productos";
}
<br />
<h2>Productos</h2>
<br />
<div class="container">
    <div class="row">
        @foreach (var product in Model)
        {
            <div class="item text-center">
                <div class="row">
                    <img src="~/Content/images/@(product.Image ?? "noimage.png")" max-width="200px" class="img-responsive img-thumbnail" alt="@product.Name" />
                </div>
                <div class="row">
                    <div class="row">
                        <h4>@product.Name</h4>
                    </div>
                    <div class="row"><h4>@product.Price €</h4></div>
                    @if (product.Amount > 0)
                    {
                        <form method="post" action="@Url.Action("Add", "cart")">
                            <div class="row">
                                <input type="number" hidden value="@product.Id" name="productId" />
                                <select name="units">
                                    @for (int i = 1; i <= (product.Amount < 10 ? product.Amount : 10); i++)
                                    {
                                        <option value="@i">@i</option>
                                    }
                                </select>
                                <input type="submit" class="btn btn-danger" value="Añadir al carro" />
                            </div>
                        </form>
                    }
                    else
                    {
                        <div class="row"><button disabled class="btn btn-danger"><i class="fa fa-shopping-cart"></i> Sin stock</button></div>

                    }
                </div>
            </div>
        }
    </div>
</div>
